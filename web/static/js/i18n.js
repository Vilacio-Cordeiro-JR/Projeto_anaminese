// Sistema de Internacionalização (i18n)
const translations = {
    pt: {
        // Login Page
        'app.title': 'BodyXP',
        'login.title': 'Entrar',
        'login.name': 'Nome',
        'login.password': 'Senha',
        'login.button': 'Entrar',
        'login.noAccount': 'Não tem uma conta?',
        'login.createAccount': 'Criar conta',
        'register.title': 'Criar Conta',
        'register.name': 'Nome',
        'register.password': 'Senha',
        'register.confirmPassword': 'Confirmar Senha',
        'register.button': 'Criar Conta',
        'register.hasAccount': 'Já tem uma conta?',
        'register.doLogin': 'Fazer login',
        
        // Toasts
        'toast.loginSuccess': 'Login realizado com sucesso!',
        'toast.loginError': 'Erro ao fazer login',
        'toast.registerSuccess': 'Conta criada com sucesso! Faça login.',
        'toast.registerError': 'Erro ao criar conta',
        'toast.passwordMismatch': 'As senhas não coincidem',
        'toast.serverError': 'Erro ao conectar com o servidor',
        
        // Main App
        'nav.newEvaluation': 'Nova Avaliação',
        'nav.evaluations': 'Avaliações',
        'nav.admin': 'Painel Admin',
        'user.settings': 'Configurações de Usuário',
        'user.name': 'Nome Completo',
        'user.birthdate': 'Data de Nascimento',
        'user.age': 'Idade',
        'user.sex': 'Sexo',
        'user.male': 'Masculino',
        'user.female': 'Feminino',
        'user.email': 'E-mail',
        'user.height': 'Altura (cm)',
        'user.saveSettings': 'Salvar Configurações',
        'user.changePassword': 'Mudar Senha',
        'user.logout': 'Sair da Conta',
        
        // Language
        'language.label': 'Idioma',
        'language.pt': 'Português',
        'language.en': 'English',
        'language.es': 'Español',
        'language.de': 'Deutsch',
        'language.ja': '日本語'
    },
    
    en: {
        // Login Page
        'app.title': 'BodyXP',
        'login.title': 'Sign In',
        'login.name': 'Name',
        'login.password': 'Password',
        'login.button': 'Sign In',
        'login.noAccount': "Don't have an account?",
        'login.createAccount': 'Create account',
        'register.title': 'Create Account',
        'register.name': 'Name',
        'register.password': 'Password',
        'register.confirmPassword': 'Confirm Password',
        'register.button': 'Create Account',
        'register.hasAccount': 'Already have an account?',
        'register.doLogin': 'Sign in',
        
        // Toasts
        'toast.loginSuccess': 'Login successful!',
        'toast.loginError': 'Login error',
        'toast.registerSuccess': 'Account created successfully! Please sign in.',
        'toast.registerError': 'Error creating account',
        'toast.passwordMismatch': 'Passwords do not match',
        'toast.serverError': 'Error connecting to server',
        
        // Main App
        'nav.newEvaluation': 'New Evaluation',
        'nav.evaluations': 'Evaluations',
        'nav.admin': 'Admin Panel',
        'user.settings': 'User Settings',
        'user.name': 'Full Name',
        'user.birthdate': 'Birth Date',
        'user.age': 'Age',
        'user.sex': 'Sex',
        'user.male': 'Male',
        'user.female': 'Female',
        'user.email': 'Email',
        'user.height': 'Height (cm)',
        'user.saveSettings': 'Save Settings',
        'user.changePassword': 'Change Password',
        'user.logout': 'Logout',
        
        // Language
        'language.label': 'Language',
        'language.pt': 'Português',
        'language.en': 'English',
        'language.es': 'Español',
        'language.de': 'Deutsch',
        'language.ja': '日本語'
    },
    
    es: {
        // Login Page
        'app.title': 'BodyXP',
        'login.title': 'Iniciar Sesión',
        'login.name': 'Nombre',
        'login.password': 'Contraseña',
        'login.button': 'Iniciar Sesión',
        'login.noAccount': '¿No tienes una cuenta?',
        'login.createAccount': 'Crear cuenta',
        'register.title': 'Crear Cuenta',
        'register.name': 'Nombre',
        'register.password': 'Contraseña',
        'register.confirmPassword': 'Confirmar Contraseña',
        'register.button': 'Crear Cuenta',
        'register.hasAccount': '¿Ya tienes una cuenta?',
        'register.doLogin': 'Iniciar sesión',
        
        // Toasts
        'toast.loginSuccess': '¡Inicio de sesión exitoso!',
        'toast.loginError': 'Error al iniciar sesión',
        'toast.registerSuccess': '¡Cuenta creada con éxito! Inicia sesión.',
        'toast.registerError': 'Error al crear cuenta',
        'toast.passwordMismatch': 'Las contraseñas no coinciden',
        'toast.serverError': 'Error al conectar con el servidor',
        
        // Main App
        'nav.newEvaluation': 'Nueva Evaluación',
        'nav.evaluations': 'Evaluaciones',
        'nav.admin': 'Panel Admin',
        'user.settings': 'Configuración de Usuario',
        'user.name': 'Nombre Completo',
        'user.birthdate': 'Fecha de Nacimiento',
        'user.age': 'Edad',
        'user.sex': 'Sexo',
        'user.male': 'Masculino',
        'user.female': 'Femenino',
        'user.email': 'Correo',
        'user.height': 'Altura (cm)',
        'user.saveSettings': 'Guardar Configuración',
        'user.changePassword': 'Cambiar Contraseña',
        'user.logout': 'Cerrar Sesión',
        
        // Language
        'language.label': 'Idioma',
        'language.pt': 'Português',
        'language.en': 'English',
        'language.es': 'Español',
        'language.de': 'Deutsch',
        'language.ja': '日本語'
    },
    
    de: {
        // Login Page
        'app.title': 'BodyXP',
        'login.title': 'Anmelden',
        'login.name': 'Name',
        'login.password': 'Passwort',
        'login.button': 'Anmelden',
        'login.noAccount': 'Noch kein Konto?',
        'login.createAccount': 'Konto erstellen',
        'register.title': 'Konto Erstellen',
        'register.name': 'Name',
        'register.password': 'Passwort',
        'register.confirmPassword': 'Passwort Bestätigen',
        'register.button': 'Konto Erstellen',
        'register.hasAccount': 'Haben Sie bereits ein Konto?',
        'register.doLogin': 'Anmelden',
        
        // Toasts
        'toast.loginSuccess': 'Anmeldung erfolgreich!',
        'toast.loginError': 'Anmeldefehler',
        'toast.registerSuccess': 'Konto erfolgreich erstellt! Bitte melden Sie sich an.',
        'toast.registerError': 'Fehler beim Erstellen des Kontos',
        'toast.passwordMismatch': 'Passwörter stimmen nicht überein',
        'toast.serverError': 'Fehler beim Verbinden mit dem Server',
        
        // Main App
        'nav.newEvaluation': 'Neue Bewertung',
        'nav.evaluations': 'Bewertungen',
        'nav.admin': 'Admin-Panel',
        'user.settings': 'Benutzereinstellungen',
        'user.name': 'Vollständiger Name',
        'user.birthdate': 'Geburtsdatum',
        'user.age': 'Alter',
        'user.sex': 'Geschlecht',
        'user.male': 'Männlich',
        'user.female': 'Weiblich',
        'user.email': 'E-Mail',
        'user.height': 'Größe (cm)',
        'user.saveSettings': 'Einstellungen Speichern',
        'user.changePassword': 'Passwort Ändern',
        'user.logout': 'Abmelden',
        
        // Language
        'language.label': 'Sprache',
        'language.pt': 'Português',
        'language.en': 'English',
        'language.es': 'Español',
        'language.de': 'Deutsch',
        'language.ja': '日本語'
    },
    
    ja: {
        // Login Page
        'app.title': 'BodyXP',
        'login.title': 'ログイン',
        'login.name': '名前',
        'login.password': 'パスワード',
        'login.button': 'ログイン',
        'login.noAccount': 'アカウントをお持ちでないですか？',
        'login.createAccount': 'アカウント作成',
        'register.title': 'アカウント作成',
        'register.name': '名前',
        'register.password': 'パスワード',
        'register.confirmPassword': 'パスワード確認',
        'register.button': 'アカウント作成',
        'register.hasAccount': 'すでにアカウントをお持ちですか？',
        'register.doLogin': 'ログイン',
        
        // Toasts
        'toast.loginSuccess': 'ログインに成功しました！',
        'toast.loginError': 'ログインエラー',
        'toast.registerSuccess': 'アカウントが作成されました！ログインしてください。',
        'toast.registerError': 'アカウント作成エラー',
        'toast.passwordMismatch': 'パスワードが一致しません',
        'toast.serverError': 'サーバーへの接続エラー',
        
        // Main App
        'nav.newEvaluation': '新規評価',
        'nav.evaluations': '評価一覧',
        'nav.admin': '管理パネル',
        'user.settings': 'ユーザー設定',
        'user.name': 'フルネーム',
        'user.birthdate': '生年月日',
        'user.age': '年齢',
        'user.sex': '性別',
        'user.male': '男性',
        'user.female': '女性',
        'user.email': 'メール',
        'user.height': '身長 (cm)',
        'user.saveSettings': '設定を保存',
        'user.changePassword': 'パスワード変更',
        'user.logout': 'ログアウト',
        
        // Language
        'language.label': '言語',
        'language.pt': 'Português',
        'language.en': 'English',
        'language.es': 'Español',
        'language.de': 'Deutsch',
        'language.ja': '日本語'
    }
};

// Funções de internacionalização
const i18n = {
    currentLanguage: localStorage.getItem('language') || 'pt',
    
    t(key) {
        return translations[this.currentLanguage]?.[key] || translations.pt[key] || key;
    },
    
    setLanguage(lang) {
        if (translations[lang]) {
            this.currentLanguage = lang;
            localStorage.setItem('language', lang);
            this.updatePageTexts();
        }
    },
    
    updatePageTexts() {
        // Atualizar todos os elementos com data-i18n
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = this.t(key);
            
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                // Para inputs, atualizar placeholder
                if (element.hasAttribute('placeholder')) {
                    element.placeholder = translation;
                }
            } else {
                // Para outros elementos, atualizar textContent
                element.textContent = translation;
            }
        });
        
        // Atualizar placeholders específicos
        document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
            const key = element.getAttribute('data-i18n-placeholder');
            element.placeholder = this.t(key);
        });
        
        // Atualizar value de inputs específicos (como options)
        document.querySelectorAll('[data-i18n-value]').forEach(element => {
            const key = element.getAttribute('data-i18n-value');
            element.textContent = this.t(key);
        });
    },
    
    init() {
        // Aplicar idioma salvo ao carregar página
        this.updatePageTexts();
        
        // Atualizar seletor de idioma se existir
        const langSelector = document.getElementById('languageSelector');
        if (langSelector) {
            langSelector.value = this.currentLanguage;
        }
    }
};

// Inicializar quando o DOM estiver pronto
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => i18n.init());
} else {
    i18n.init();
}
